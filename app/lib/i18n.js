// Internationalization support for English and Swedish

const translations = {
  en: {
    // Navigation
    nav: {
      overview: "Overview",
      operations: "Operations",
      drivers: "Drivers",
      fleet: "Fleet",
      owners: "Owners",
      trips: "Trips",
      addRecords: "Add Records",
      liveMap: "Live Map",
      profit: "Profit",
      guestTrips: "Guest Trips",
      promo: "Promo",
    },
    // Common
    common: {
      loading: "Loading...",
      error: "Error",
      success: "Success",
      save: "Save",
      cancel: "Cancel",
      delete: "Delete",
      edit: "Edit",
      create: "Create",
      refresh: "Refresh",
      signOut: "Sign Out",
      signedInAs: "Signed in as",
      refreshData: "Refresh data",
    },
    // Dashboard
    dashboard: {
      title: "Namos Operations Center",
      networkSnapshot: "Network snapshot",
      lastRefresh: "Last refresh",
      activeDrivers: "Active drivers",
      driversOnline: "Drivers online",
      fleetVehicles: "Fleet vehicles",
      openRequests: "Open requests",
      scheduledTrips: "Scheduled trips",
      revenueToday: "Revenue today",
      allTimeRegistered: "All-time registered",
      currentlySharing: "Currently sharing live location",
      passedInspection: "Vehicles that passed inspection",
      ridesWaiting: "Rides waiting to be accepted",
      upcoming24h: "Upcoming in the next 24h",
      grossBeforePayouts: "Gross before payouts",
    },
    // Profit
    profit: {
      title: "Profit Calculation",
      driverProfit: "Driver Profit",
      ownerProfit: "Owner Profit",
      platformCommission: "Platform Commission",
      totalRevenue: "Total Revenue",
      profitBreakdown: "Profit Breakdown",
      commissionRates: "Commission Rates",
      driverCommission: "Driver Commission",
      ownerCommission: "Owner Commission",
      platformFee: "Platform Fee",
    },
    // Guest Trips
    guestTrips: {
      title: "Create Guest Trip",
      createForGuest: "Create Trip for Guest",
      createForUser: "Create Trip for User",
      guestName: "Guest Name",
      guestPhone: "Guest Phone",
      guestEmail: "Guest Email",
      pickupLocation: "Pickup Location",
      dropoffLocation: "Dropoff Location",
      rideMode: "Ride Mode",
      immediate: "Immediate",
      scheduled: "Scheduled",
      seniorAssist: "Senior Assist",
      scheduledAt: "Scheduled At",
      vehicleTier: "Vehicle Tier",
      economy: "Economy",
      comfort: "Comfort",
      suv: "SUV",
      passengerCount: "Passenger Count",
      includePets: "Include Pets",
      riderNotes: "Rider Notes",
      selectUser: "Select User",
      nearbyDrivers: "Nearby Drivers",
      searchLocation: "Search location...",
      selectOnMap: "Click on map or search for location",
    },
    // Promo
    promo: {
      title: "Promo Management",
      createPromo: "Create Promo",
      editPromo: "Edit Promo",
      name: "Promo Name",
      image: "Image",
      imageUrl: "Image URL",
      uploadImage: "Upload Image",
      link: "Redirect Link",
      isActive: "Active",
      displayOrder: "Display Order",
      startDate: "Start Date",
      endDate: "End Date",
      targetAudience: "Target Audience",
      all: "All Users",
      riders: "Riders",
      drivers: "Drivers",
      owners: "Owners",
      clickCount: "Clicks",
      createdAt: "Created",
      noPromos: "No promos found",
      activePromos: "Active Promos",
      inactivePromos: "Inactive Promos",
      deleteConfirm: "Are you sure you want to delete this promo?",
    },
  },
  sv: {
    // Navigation
    nav: {
      overview: "Översikt",
      operations: "Operationer",
      drivers: "Förare",
      fleet: "Fordon",
      owners: "Ägare",
      trips: "Resor",
      addRecords: "Lägg till poster",
      liveMap: "Live-karta",
      profit: "Vinst",
      guestTrips: "Gästresor",
      promo: "Kampanj",
    },
    // Common
    common: {
      loading: "Laddar...",
      error: "Fel",
      success: "Framgång",
      save: "Spara",
      cancel: "Avbryt",
      delete: "Radera",
      edit: "Redigera",
      create: "Skapa",
      refresh: "Uppdatera",
      signOut: "Logga ut",
      signedInAs: "Inloggad som",
      refreshData: "Uppdatera data",
    },
    // Dashboard
    dashboard: {
      title: "Namos Operations Center",
      networkSnapshot: "Nätverksöversikt",
      lastRefresh: "Senaste uppdatering",
      activeDrivers: "Aktiva förare",
      driversOnline: "Förare online",
      fleetVehicles: "Fordon i flottan",
      openRequests: "Öppna förfrågningar",
      scheduledTrips: "Schemalagda resor",
      revenueToday: "Intäkter idag",
      allTimeRegistered: "Alla registrerade",
      currentlySharing: "Delar live-plats just nu",
      passedInspection: "Fordon som klarat inspektion",
      ridesWaiting: "Resor som väntar på att accepteras",
      upcoming24h: "Kommande inom 24 timmar",
      grossBeforePayouts: "Brutto före utbetalningar",
    },
    // Profit
    profit: {
      title: "Vinstberäkning",
      driverProfit: "Förarens vinst",
      ownerProfit: "Ägarens vinst",
      platformCommission: "Plattformskommission",
      totalRevenue: "Totala intäkter",
      profitBreakdown: "Vinstfördelning",
      commissionRates: "Provisionssatser",
      driverCommission: "Förarens provision",
      ownerCommission: "Ägarens provision",
      platformFee: "Plattformsavgift",
    },
    // Guest Trips
    guestTrips: {
      title: "Skapa gästresa",
      createForGuest: "Skapa resa för gäst",
      createForUser: "Skapa resa för användare",
      guestName: "Gästens namn",
      guestPhone: "Gästens telefon",
      guestEmail: "Gästens e-post",
      pickupLocation: "Upphämtningsplats",
      dropoffLocation: "Avlämningsplats",
      rideMode: "Resläge",
      immediate: "Omedelbar",
      scheduled: "Schemalagd",
      seniorAssist: "Seniorhjälp",
      scheduledAt: "Schemalagd tid",
      vehicleTier: "Fordonsnivå",
      economy: "Ekonomi",
      comfort: "Komfort",
      suv: "SUV",
      passengerCount: "Antal passagerare",
      includePets: "Inkludera husdjur",
      riderNotes: "Resenärsanteckningar",
      selectUser: "Välj användare",
      nearbyDrivers: "Närliggande förare",
      searchLocation: "Sök plats...",
      selectOnMap: "Klicka på kartan eller sök efter plats",
    },
    // Promo
    promo: {
      title: "Kampanjhantering",
      createPromo: "Skapa kampanj",
      editPromo: "Redigera kampanj",
      name: "Kampanjnamn",
      image: "Bild",
      imageUrl: "Bild-URL",
      uploadImage: "Ladda upp bild",
      link: "Omdirigeringslänk",
      isActive: "Aktiv",
      displayOrder: "Visningsordning",
      startDate: "Startdatum",
      endDate: "Slutdatum",
      targetAudience: "Målgrupp",
      all: "Alla användare",
      riders: "Passagerare",
      drivers: "Förare",
      owners: "Ägare",
      clickCount: "Klick",
      createdAt: "Skapad",
      noPromos: "Inga kampanjer hittades",
      activePromos: "Aktiva kampanjer",
      inactivePromos: "Inaktiva kampanjer",
      deleteConfirm: "Är du säker på att du vill radera denna kampanj?",
    },
  },
};

// Get current language from localStorage or default to English
export function getLanguage() {
  if (typeof window === "undefined") return "en";
  return localStorage.getItem("namos_language") || "en";
}

// Set language
export function setLanguage(lang) {
  if (typeof window === "undefined") return;
  localStorage.setItem("namos_language", lang);
}

// Get translation
export function t(key, lang = null) {
  const currentLang = lang || getLanguage();
  const keys = key.split(".");
  let value = translations[currentLang];

  for (const k of keys) {
    value = value?.[k];
    if (!value) {
      // Fallback to English if translation missing
      value = translations.en;
      for (const k2 of keys) {
        value = value?.[k2];
      }
      break;
    }
  }

  return value || key;
}

// Hook for React components (must be used in client components)
export function useTranslation() {
  if (typeof window === "undefined") {
    return {
      t: (key) => t(key, "en"),
      language: "en",
      setLanguage: () => {},
    };
  }

  // This will be implemented in a client component hook file
  return {
    t: (key) => t(key),
    language: getLanguage(),
    setLanguage: setLanguage,
  };
}
